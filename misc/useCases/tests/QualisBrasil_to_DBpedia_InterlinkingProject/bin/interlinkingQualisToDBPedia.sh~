#!/bin/bash
#creating the Temp directory if it doesn't exist
mkdir -p tests/Graphs/QualisBrasil/nt

#removing evaluations.nt files, if it exists
if [ -f tests/Graphs/QualisBrasil/nt/dbpedia_qualis_links.nt ]; then rm tests/Graphs/QualisBrasil/nt/dbpedia_qualis_links.nt; fi 

#removing QualisBrasil.nt files, if it exists
if [ -f tests/Graphs/QualisBrasil/QualisBrasil.nt ]; then rm tests/Graphs/QualisBrasil/QualisBrasil.nt; fi 

java -jar tools/LIMES-DIST/LIMES.jar tests/QualisBrasil_to_DBpedia_InterlinkingProject/Scripts/linkingQualisToDbpedia.xml

echo "concatenating the nt files"
for file in tests/Graphs/QualisBrasil/nt/*.nt; 
do
  FILESIZE=$(stat -c%s $file)
  if [ $FILESIZE -eq 0 ]; 
  then
    echo "$file is empty" >>  errors.txt
    $ERROR=1
  else
    grep "^<http" $file;
  fi;
done 2>/dev/null >> tests/Graphs/QualisBrasil/QualisBrasil.nt
